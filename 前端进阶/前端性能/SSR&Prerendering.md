# SSR & Prerendering
>这章的主题是 SSR & Prerendering，但是本章中会提到 SPA、SEO 相关的知识点，接下来进入正题
> * [前后端分离](#前后端分离)
> * [SPA](#spa)
> * [SEO](#seo)
> * [SSR](#ssr)

[Prerendering](https://blog.csdn.net/yftk765768540/article/details/81047145)
[SSR vs Prerendering](https://blog.csdn.net/csdn_yudong/article/details/80769424)
[SSR](https://blog.csdn.net/csdn_yudong/article/details/89136708)

<br>

## 前后端分离
基本概念： 

　　前后端根据 AJAX 进行数据的交互  
  
主要优点：
  * 分工明确，前后端各司其职，后端专注业务逻辑和功能的实现，前端专注页面设计。
  * 接口明确，并行开发。
  * 提高开发效率，一定程度上减少了前后端的沟通成本  
  
　　在前后端分离中，后端一般提供 RESTful API，常将数据以 JSON 格式返回；而前端一般使用什么呢，这里便是引出了我们讨论的主题之一：SPA。

<br>

## SPA
　　SPA 全称是 single page application，是一种网络应用程序模型。在传统的网站中，不同的页面之间的切换都是直接从服务器加载一整个新的页面，而在 SPA 这个模型中，是通过动态地重写页面的部分与用户交互，而避免了过多的数据交换，响应速度自然相对更高。比如 Vue 中的 `<router-view/>`。
  
　　SPA 有以下优点：
  * 页面之间的切换非常快
  * 一定程度上减少了后端服务器的压力（不用管页面逻辑和渲染）
  * 后端程序只需要提供 API，完全不用管客户端到底是 PC Web 还是移动端等
  
    SPA 的缺点：
  * 首屏打开速度很慢，因为用户首次加载需要先下载 SPA 框架及应用程序的代码，然后再渲染页面。
  * 不利于 SEO

<br>

## SEO
　　SEO（Search Engine Optimization），中文一般译作：搜索引擎优化。SEO 是通过了解搜索引擎的运作规则（如何抓取网站页面，如何索引以及如何根据特定的关键字展现搜索结果排序等）来调整网站，以提高该网站在搜索引擎中某些关键词的搜索结果排名。如 `<meta>` 标签的 description、keywords。

　　前面我们谈到 SPA 不利于 SEO，是因为就目前而言，部分搜索引擎如 Google、bing 等，它们的爬虫虽然已经支持执行 JavaScript 甚至是通过 Ajax 获取数据了，但是对于异步数据的支持也还不足，[Vue SSR](https://ssr.vuejs.org/zh/) 中是这样说的：
>如果你的应用程序初始展示 loading 菊花图，然后通过 Ajax 获取内容，抓取工具并不会等待异步完成后再行抓取页面内容。

　　SPA 应用中，通常通过 Ajax 获取数据，而这里就难以保证我们的页面能被搜索引擎爬虫到。并且有一些搜索引擎不支持执行 JavaScript 和通过 Ajax 获取数据，那就更不用提 SEO 了。

<br>

## SSR
　　与传统 SPA （单页应用程序） 相比，服务器端渲染（SSR）的优势主要在于：

* **更好的 SEO，由于搜索引擎爬虫抓取工具可以直接查看完全渲染的页面。**
  截至目前，Google 和 Bing 可以很好对同步 JavaScript 应用程序进行索引。在这里，同步是关键。如果你的应用程序初始展示 loading 菊花图，然后通过 Ajax 获取内容，抓取工具并不会等待异步完成后再行抓取页面内容。也就是说，如果 SEO 对你的站点至关重要，而你的页面又是异步获取内容，则你可能需要服务器端渲染 (SSR) 解决此问题。
* **更快的内容到达时间 (time-to-content)**，
特别是对于缓慢的网络情况或运行缓慢的设备。无需等待所有的 JavaScript 都完成下载并执行，才显示服务器渲染的标记，所以你的用户将会更快速地看到完整渲染的页面。通常可以产生更好的用户体验。

使用服务器端渲染 (SSR) 时还需要有一些权衡之处：

* **开发条件所限。**
浏览器特定的代码，只能在某些生命周期钩子函数 (lifecycle hook) 中使用；一些外部扩展库可能需要特殊处理，才能在服务器渲染应用程序中运行。

* **涉及构建设置和部署的更多要求。**
与可以部署在任何静态文件服务器上的完全静态单页面应用程序 (SPA) 不同，服务器渲染应用程序，需要处于 Node.js server 运行环境。

* **更多的服务器端负载。**
在 Node.js 中渲染完整的应用程序，显然会比仅仅提供静态文件的 server 更加大量占用 CPU 资源 ，因此如果你预料在高流量环境 下使用，请准备相应的服务器负载，并明智地采用缓存策略。
